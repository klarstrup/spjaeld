Higher order function for rate-limiting functions that return promises.